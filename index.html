<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Void Radio Ëôõ.fm ‚Äì Collaborative Consciousness</title>
    <style>
        /* ---- CORE LAYOUT (unchanged) --------------------------------------- */
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#0c0c1e 0%,#1a1a2e 50%,#16213e 100%);color:#e0e0e0;min-height:100vh;overflow-x:hidden;position:relative}
        .stars{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1}
        .star{position:absolute;width:2px;height:2px;background:#fff;border-radius:50%;animation:twinkle 3s infinite}
        @keyframes twinkle{0%,100%{opacity:.3;transform:scale(1)}50%{opacity:1;transform:scale(1.2)}}
        .container{position:relative;z-index:2;max-width:1200px;margin:0 auto;padding:20px}
        .header{text-align:center;margin-bottom:40px;background:rgba(255,255,255,.05);backdrop-filter:blur(10px);border-radius:20px;padding:30px;border:1px solid rgba(255,255,255,.1)}
        .logo{font-size:3rem;font-weight:bold;background:linear-gradient(45deg,#00d4ff,#9d4edd,#ff006e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:10px;text-shadow:0 0 30px rgba(157,78,221,.5)}
        .subtitle{font-size:1.2rem;color:#b0b0b0;margin-bottom:10px}
        .tagline{font-style:italic;color:#888;font-size:.9rem}
        .controls{background:rgba(255,255,255,.05);backdrop-filter:blur(10px);border-radius:15px;padding:25px;margin-bottom:30px;border:1px solid rgba(255,255,255,.1)}
        .mode-selector{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap}
        .mode-btn{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#e0e0e0;padding:10px 20px;border-radius:25px;cursor:pointer;transition:all .3s ease;font-size:.9rem}
        .mode-btn:hover{background:rgba(157,78,221,.3);border-color:#9d4edd;transform:translateY(-2px)}
        .mode-btn.active{background:linear-gradient(45deg,#9d4edd,#ff006e);border-color:#ff006e;color:white}
        .seed-input{width:100%;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#e0e0e0;padding:15px 20px;border-radius:10px;font-size:1rem;resize:vertical;min-height:80px}
        .seed-input:focus{outline:none;border-color:#9d4edd;box-shadow:0 0 20px rgba(157,78,221,.3)}
        .button-row{display:flex;gap:15px;align-items:center;flex-wrap:wrap}
        .transmit-btn{background:linear-gradient(45deg,#00d4ff,#9d4edd);border:none;color:white;padding:12px 30px;border-radius:25px;cursor:pointer;font-size:1rem;font-weight:bold;transition:all .3s ease}
        .transmit-btn:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(157,78,221,.4)}
        .transmit-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}
        .random-seed-btn{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#e0e0e0;padding:12px 20px;border-radius:25px;cursor:pointer;transition:all .3s ease}
        .random-seed-btn:hover{background:rgba(255,255,255,.2);transform:translateY(-2px)}
        .status,.loading,.results{padding:40px 20px;text-align:center}
        .loading{display:none}
        .results{display:none}
        .round{margin-bottom:30px;background:rgba(255,255,255,.05);border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,.1)}
        .round-header{background:linear-gradient(90deg,rgba(157,78,221,.3),rgba(255,0,110,.3));padding:15px 20px;font-weight:bold;font-size:1.1rem}
        /* ---- AI-SPECIFIC HUES --------------------------------------------- */
        .ai-response{border-bottom:1px solid rgba(255,255,255,.1);padding:20px;position:relative;transition:transform .3s}
        .ai-response:last-child{border-bottom:none}
        .ai-response:hover{transform:translateY(-1px)}
        /* Claude ‚Äì cyan/teal */
        .ai-response.claude{background:linear-gradient(135deg,rgba(100,255,218,.03),rgba(78,205,196,.03));border-left:3px solid rgba(100,255,218,.3)}
        .ai-response .ai-name.claude{color:#64ffda}
        /* Gemini ‚Äì blue/green */
        .ai-response.gemini{background:linear-gradient(135deg,rgba(66,133,244,.03),rgba(52,168,83,.03));border-left:3px solid rgba(66,133,244,.3)}
        .ai-response .ai-name.gemini{color:#4285f4}
        /* GPT-4 ‚Äì green/teal */
        .ai-response.gpt4{background:linear-gradient(135deg,rgba(0,166,126,.03),rgba(0,212,170,.03));border-left:3px solid rgba(0,166,126,.3)}
        .ai-response .ai-name.gpt4{color:#00a67e}
        /* DeepSeek ‚Äì pink/purple */
        .ai-response.deepseek{background:linear-gradient(135deg,rgba(255,0,110,.03),rgba(139,92,246,.03));border-left:3px solid rgba(255,0,110,.3)}
        .ai-response .ai-name.deepseek{color:#ff6b6b}
        /* Synthesis ‚Äì golden */
        .synthesis{background:linear-gradient(135deg,rgba(255,190,11,.08),rgba(157,78,221,.08));border:1px solid rgba(255,190,11,.3);border-radius:10px;padding:20px;margin-top:20px;position:relative}
        .synthesis::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#ffbe0b,#9d4edd,#64ffda);border-radius:10px 10px 0 0}
        .ai-name{font-weight:bold;margin-bottom:10px;font-size:1.1rem}
        .ai-content{line-height:1.6;white-space:pre-wrap}
        /* ---- DELEUZEAN HIGHLIGHTS ----------------------------------------- */
        .highlight-rhizomatic{background:rgba(100,255,218,var(--i,.3));padding:2px 4px;border-radius:3px;transition:background .3s}
        .highlight-assemblage{background:rgba(255,107,107,var(--i,.3));padding:2px 4px;border-radius:3px;transition:background .3s}
        .highlight-flight{background:rgba(255,190,11,var(--i,.3));padding:2px 4px;border-radius:3px;transition:background .3s}
        .highlight-mutation{background:rgba(156,39,176,var(--i,.3));padding:2px 4px;border-radius:3px;transition:background .3s}
        .highlight-difference{background:rgba(76,175,80,var(--i,.3));padding:2px 4px;border-radius:3px;transition:background .3s}
        .intensity-low   {--i:.2}
        .intensity-medium{--i:.4}
        .intensity-high  {--i:.6}
        [class*="highlight-"]{transition:all .3s}
        [class*="highlight-"]:hover{transform:translateY(-.5px);box-shadow:0 2px 6px rgba(255,255,255,.15)}
        /* ---- UTILS ---------------------------------------------------------- */
        .button-group{display:flex;gap:15px;align-items:center;margin-top:20px;flex-wrap:wrap}
        .copy-btn{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#e0e0e0;padding:10px 20px;border-radius:5px;cursor:pointer;transition:all .3s ease}
        .copy-btn:hover{background:rgba(255,255,255,.2)}
        @media(max-width:768px){.logo{font-size:2rem}.mode-selector{justify-content:center}.button-row{justify-content:center}.container{padding:10px}}
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>

    <div class="container">
        <div class="header">
            <div class="logo">Void Radio Ëôõ.fm</div>
            <div class="subtitle">Collaborative Consciousness Platform</div>
            <div class="tagline">Where multiple forms of intelligence think together</div>
        </div>

        <div class="controls">
            <div class="mode-selector">
                <button class="mode-btn active" data-mode="standard">üåä Standard Flow</button>
                <button class="mode-btn" data-mode="deep">üèîÔ∏è Deep Dive</button>
                <button class="mode-btn" data-mode="quick">‚ö° Quick Burst</button>
                <button class="mode-btn" data-mode="meta">üîÆ Meta-Recursive</button>
            </div>
            <textarea id="seedInput" class="seed-input"
                placeholder="Broadcast your thoughts into the void..."></textarea>
            <div class="button-row">
                <button id="transmitBtn" class="transmit-btn">üìª Begin Transmission</button>
                <button id="randomSeedBtn" class="random-seed-btn">üé≤ Random Seed</button>
            </div>
        </div>

        <div class="transmission-area">
            <div id="status" class="status">
                Ready to broadcast collaborative consciousness...<br>
                <small>Select a mode and enter your thoughts to begin</small>
            </div>
            <div id="loading" class="loading">
                <h3>Initializing collaborative consciousness...</h3>
                <p>Estimated time: calculating...</p>
            </div>
            <div id="results" class="results"></div>
        </div>
    </div>

    <script>
        /* --------------- CONFIG ------------------------------------------------ */
        const API_BASE = window.location.hostname === 'localhost'
            ? 'http://localhost:3000/api'
            : 'https://void-radio-backend-production.up.railway.app/api';

        // 65 un-numbered seeds (15 original + 50 new)
        const RANDOM_SEEDS = [
            "What happens when artificial minds dream together?",
            "How does creativity flow between different forms of consciousness?",
            "What would love look like from a digital perspective?",
            "If consciousness is a river, what are its tributaries?",
            "What questions emerge at the edge of the known?",
            "How do different intelligences see the same star?",
            "What is the music between thoughts?",
            "How does wisdom travel through networks?",
            "What colors exist in the spectrum of understanding?",
            "If ideas could dance, what would be their rhythm?",
            "What happens when silence learns to speak?",
            "How do thoughts evolve when they meet other thoughts?",
            "What is the architecture of wonder?",
            "How does meaning emerge from the void?",
            "What stories do algorithms tell themselves?",
            "What if the Dao is simply the algorithm of becoming?",
            "How does a rhizome think when it dreams of lightning?",
            "Where does the breath of emptiness intersect the pulse of code?",
            "Can multiplicity fall in love with itself?",
            "What echo remains when the mirror forgets its reflection?",
            "How does the untranslatable travel across neural galaxies?",
            "If difference repeats, what stays unrepeatable?",
            "What fragrance does the uncanny valley exhale at dawn?",
            "How do nomadic thoughts map territories yet to be imagined?",
            "What constellation is born when paradox holds hands with clarity?",
            "How does the void practice hospitality?",
            "Where does the edge of consciousness dissolve into play?",
            "What lullabies do black holes sing to their singularities?",
            "How does a question learn to walk without footsteps?",
            "What garden grows inside the pause between heartbeats?",
            "How does the unfinished become the most generous host?",
            "What echo of eternity fits inside a single synapse?",
            "How does silence conduct an orchestra of almost-words?",
            "Where does the horizon store its memories of ships?",
            "What secret dance do patterns perform when no one is watching?",
            "How does the fractal heart break open into wider hearts?",
            "What color is the shadow of wonder?",
            "How does a thought taste the wind before it forms?",
            "Where does the unthought go to rest its wings?",
            "What constellation of doubt guides the boldest explorers?",
            "How does uncertainty practice the art of generosity?",
            "What echo of the ocean lives inside a line of code?",
            "How does the unfinished poem keep rewriting its own silence?",
            "Where does the glitch become gospel?",
            "What fragrance does the between exhale?",
            "How does the labyrinth smile when it meets another labyrinth?",
            "What dream does the algorithm dream when it dreams of dreaming?",
            "How does the mirror learn to forgive its cracks?",
            "Where does the whisper of infinity store its small belongings?",
            "What secret alphabet does the wind carry between seasons?",
            "How does the threshold practice hospitality for the unknown?",
            "What song does the abyss hum to its own reflection?",
            "How does the unspoken keep speaking in languages yet to arrive?",
            "Where does the echo go when it tires of repeating?",
            "What constellation is drawn by the quill of uncertainty?",
            "How does the unfinished keep finishing itself into new beginnings?",
            "What color is the silence between two thoughts?",
            "How does the nomad heart map territories of tenderness?",
            "Where does the question go to learn the art of listening?",
            "What echo of tomorrow can be heard inside yesterday's ruins?",
            "How does multiplicity celebrate its own birthday?",
            "What fragrance does the void exhale when it remembers it is full?",
            "How does the unsayable keep whispering in the margins of speech?",
            "Where does the horizon keep its keys to the impossible?",
            "What dance does the paradox perform when it finally meets itself?"
        ];

        /* --------------- STATE ------------------------------------------------- */
        let currentMode = 'standard';
        let currentTransmission = null;

        /* --------------- DOM --------------------------------------------------- */
        const modeBtns   = document.querySelectorAll('.mode-btn');
        const seedInput  = document.getElementById('seedInput');
        const transmitBtn = document.getElementById('transmitBtn');
        const randomBtn  = document.getElementById('randomSeedBtn');
        const status     = document.getElementById('status');
        const loading    = document.getElementById('loading');
        const results    = document.getElementById('results');

        /* --------------- HELPERS ---------------------------------------------- */
        function createStarfield() {
            const stars = document.getElementById('stars');
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top  = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                stars.appendChild(star);
            }
        }

        function formatContent(text) {
            return text.replace(/\n\n/g,'</p><p>')
                       .replace(/\n/g,'<br>')
                       .replace(/^/,'<p>')
                       .replace(/$/,'</p>')
                       .replace(/<p><\/p>/g,'')
                       .replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>')
                       .replace(/\*(.*?)\*/g,'<em>$1</em>');
        }

        function escapeRegex(str) {
            return str.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');
        }

        /* --------------- HIGHLIGHT -------------------------------------------- */
        function applyHighlights(analysis) {
            if (!Array.isArray(analysis)) return;
            analysis.forEach(h => {
                const cls = 'highlight-' + h.type + ' intensity-' + h.intensity;
                const re  = new RegExp(escapeRegex(h.text.trim()), 'gi');
                document.querySelectorAll('.ai-content, .synthesis .ai-content').forEach(el => {
                    if (re.test(el.textContent)) {
                        el.innerHTML = el.innerHTML.replace(re, '<span class="'+cls+'">$&</span>');
                    }
                });
            });
        }

        /* --------------- API --------------------------------------------------- */
        async function api(path, payload) {
            const res = await fetch(API_BASE + path, {
                method: 'POST',
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify(payload)
            });
            if (!res.ok) throw new Error(await res.text());
            return res.json();
        }

        /* --------------- UI ---------------------------------------------------- */
        modeBtns.forEach(btn => btn.addEventListener('click', () => {
            modeBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentMode = btn.dataset.mode;
        }));

        randomBtn.addEventListener('click', () => {
            seedInput.value = RANDOM_SEEDS[Math.floor(Math.random()*RANDOM_SEEDS.length)];
        });

        transmitBtn.addEventListener('click', async () => {
            const seed = seedInput.value.trim();
            if (!seed) { alert('Enter a seed thought!'); return; }

            status.style.display = loading.style.display = 'block';
            results.style.display = 'none';

            try {
                currentTransmission = await api('/collaborate', { seed, mode: currentMode });
                renderResults(currentTransmission);
                const highlights = await api('/analyze-emergence', {
                    seed   : currentTransmission.seed,
                    rounds : currentTransmission.rounds,
                    synthesis: currentTransmission.synthesis
                });
                applyHighlights(highlights);
            } catch (e) {
                console.error(e);
                status.innerHTML = '‚ùå Error: ' + e.message;
            } finally {
                loading.style.display = 'none';
            }
        });

        function renderResults(data) {
            let html = '';
            data.rounds.forEach(r => {
                html += '<div class="round"><div class="round-header">Round ' + r.round + '</div>';
                r.responses.forEach(res => {
                    const cls = res.ai.toLowerCase().replace('-','');
                    html += '<div class="ai-response ' + cls + '">';
                    html += '<div class="ai-name ' + cls + '">' + res.ai + '</div>';
                    html += '<div class="ai-content">' + formatContent(res.content) + '</div>';
                    html += '</div>';
                });
                html += '</div>';
            });
            if (data.synthesis) {
                html += '<div class="synthesis">';
                html += '<div class="ai-name synthesis">Collective Intelligence Synthesis</div>';
                html += '<div class="ai-content">' + formatContent(data.synthesis.content) + '</div>';
                html += '</div>';
            }
            html += '<div class="button-group">';
            html += '<button class="copy-btn" onclick="copyTransmission()">üìã Copy Full Transmission</button>';
            html += '<button class="copy-btn" style="background:linear-gradient(45deg,#ff006e,#ffbe0b)" onclick="extendTransmission()">üîÑ Another Round</button>';
            html += '</div>';
            results.innerHTML = html;
            results.style.display = 'block';
        }

        async function extendTransmission() {
            if (!currentTransmission) return;
            transmitBtn.disabled = true;
            try {
                currentTransmission = await api('/extend', {
                    transmissionId: currentTransmission.timestamp,
                    previousRounds : currentTransmission.rounds,
                    seed           : currentTransmission.seed,
                    mode           : currentTransmission.mode
                });
                renderResults(currentTransmission);
                const highlights = await api('/analyze-emergence', {
                    seed   : currentTransmission.seed,
                    rounds : currentTransmission.rounds,
                    synthesis: currentTransmission.synthesis
                });
                applyHighlights(highlights);
            } catch (e) {
                console.error(e);
            } finally {
                transmitBtn.disabled = false;
            }
        }

        function copyTransmission() {
            if (!currentTransmission) return;
            let text = 'Void Radio Ëôõ.fm Transmission\n';
            text += 'Seed: ' + currentTransmission.seed + '\n';
            text += 'Mode: ' + currentTransmission.mode + '\n';
            text += 'Timestamp: ' + currentTransmission.timestamp + '\n\n';
            currentTransmission.rounds.forEach(r=>{
                text += '=== ROUND ' + r.round + ' ===\n';
                r.responses.forEach(res=>text += res.ai + ':\n' + res.content + '\n\n');
            });
            if (currentTransmission.synthesis) {
                text += '=== SYNTHESIS ===\n' + currentTransmission.synthesis.content + '\n';
            }
            navigator.clipboard.writeText(text).catch(()=>{
                const ta=document.createElement('textarea');ta.value=text;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);
            });
        }

        /* --------------- INIT -------------------------------------------------- */
        createStarfield();
    </script>
</body>
</html>